import joblib
from sklearn.ensemble import RandomForestClassifier

# ==================================================
# FEATURE ORDER (35 FEATURES)
# ==================================================
FEATURES = [
    "cough",           # 0
    "heavycough",      # 1
    "tired",           # 2
    "feverlittle",     # 3
    "feverbig",        # 4
    "sore_throat",     # 5
    "chestpain",       # 6
    "chest",           # 7
    "tightchest",      # 8
    "breath",          # 9
    "breathtired",     #10
    "breathfast",      #11
    "wheezing",        #12
    "runny_nose",      #13
    "sneeze",          #14
    "bodyaches",       #15
    "weight",          #16
    "panting",         #17
    "swallow",         #18
    "phlegm",          #19
    "headache",        #20
    "chronic_cough",   #21
    "aqi_bad",         #22
    "sad",             #23
    "nausea",          #24
    "diarrhea",        #25
    "loss_smell",      #26
    "red_eyes",        #27
    "skin_rash",       #28
    "finger_color",    #29
    "hoarseness",      #30
    "barking_cough",   #31
    "bloody_nose",     #32
    "jaw_swelling",    #33
    "earache",         #34  ✅ เพิ่ม
    "stridor"          #35
]


# ==================================================
# TRAINING DATA
# ==================================================
X = [

# 0 หวัด
[1,0,0,1,0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 1 ไข้หวัดใหญ่
[1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 2 ปอดอักเสบ
[1,0,1,0,1,0,1,0,0,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 3 หลอดลมอักเสบ
[1,0,1,1,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 4 หืด (Asthma)
[1,0,1,0,0,0,0,0,1,1,1,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 5 วัณโรค
[1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 6 ทอนซิลอักเสบ (earache)
[0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],

# 7 ระคายเคืองจากฝุ่น
[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 8 ไซนัสอักเสบ (earache)
[1,0,1,1,0,1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0],

# 9 COPD
[1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 10 ถุงลมโป่งพอง
[1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 11 หลอดลมโป่งพอง
[1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 12 COVID-19
[1,0,1,1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,0,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0],

# 13 โรคหัด
[1,0,1,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0],

# 14 อีสุกอีใส
[0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],

# 15 ไข้ผื่นกุหลาบ
[0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0],

# 16 คอตีบ
[1,0,1,1,0,1,0,0,0,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0],

# 17 คางทูม (earache)
[0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0],

# 18 ครู้ป
[1,0,1,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1],

# 19 หลอดลมฝอยอักเสบ
[1,0,1,0,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 20 กล่องเสียงอักเสบ
[1,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],

# 21 อีดำอีแดง
[0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],

# 22 เยื่อจมูกอักเสบเป็นหนอง
[1,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 23 เลือดกำเดา
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],

# 24 ไอกรน
[1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1],

# 25 เยื่อหุ้มปอดอักเสบ
[1,0,1,1,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],

# 26 หัดเยอรมัน
[1,0,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],

# 27 ผนังกั้นจมูกคด
[0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0],

# 28 สิ่งแปลกปลอมเข้าจมูก
[0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],

# 29 หลอดลมพอง
[1,0,1,1,0,0,1,0,0,1,1,0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0],

# 30 หวัดภูมิแพ้
[1,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0],

]

y = list(range(len(X)))

# ==================================================
# TRAIN MODEL
# ==================================================
model = RandomForestClassifier(
    n_estimators=500,
    max_depth=8,
    random_state=42
)

model.fit(X, y)
joblib.dump(model, "disease_model.pkl")

print("✅ Train respiratory model สำเร็จ (20 โรค + stridor)")